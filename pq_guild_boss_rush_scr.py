import scheduleimport timeimport datetimeimport requestsfrom bs4 import BeautifulSoupimport csvdef job():    # 現在時刻取得    now = datetime.datetime.now()    d = now.day    h = now.hour    m = now.minute    # ランキング取得    target_url = 'http://tapi.puyoquest.jp/html/guild_ranking_sp_boss_rush/?campaign_id=6039&uid=6e1869180134199eea1999ccb07a45ea'    target_html = requests.get(target_url)    soup = BeautifulSoup(target_html.content, "html.parser")    result = soup.find_all("p")    # 初期化    nameList = []    bodyList = []    start = 19      # 固定値(19番目の<p>タグから取得開始する)    get_num = 30    # 取得するギルド数    disp_num = 12   # 表示するギルド数    # データ格納    for num in range(start, start + get_num * 3, 3):        if len(result) > (start + get_num * 3):            name = (str(result[num])[21:])[:-4]            body = (str(result[num+1])[37:])[:-5]            nameList.append(name) # ギルド名            bodyList.append(body) # 討伐数    # 画面出力    print(" ")    print(str(d) + "日 " + str(h) + "時" + str(m) + "分")    for i in range(disp_num):        if i < 10:            print(" " + str(i+1) + "位:" + nameList[i] + " / " + bodyList[i] + "体目討伐")        else:            print(str(i+1) + "位:" + nameList[i] + " / " + bodyList[i] + "体目討伐")    # csv出力    with open('D:\\log.csv', 'a', encoding='utf-8_sig', newline="") as f:        writer = csv.writer(f)        writer.writerow([d, h, m,] + nameList + bodyList)# 1分ごとにjobを実行schedule.every(1).minutes.do(job)while True:    schedule.run_pending()    time.sleep(1)